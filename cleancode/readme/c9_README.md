# 단위테스트

---

### TDD 법칙 3가지
1. 실패하는 단위테스트를 작성할 때 까지 실제 코드를 작성하지 않는다. 
2. 컴파일은 실패하지 않으면서, 실행이 실패하는 정도로만 단위테스트를 작성한다. 
3. 현재 실패하는 테스트를 통과할 정도만 실제 코드를 작성한다. 

- 이렇게 TDD로 개발을 할시, 테스트코드가 모든 서비스 로직을 관리할수 있게 된다. 하지만 실제 코드와 맞먹을 정도로 방대한 테스트 코드는 심각한 관리문제를 유발하기도 한다. 

### 깨끗한 테스트코드 유지하기 
- 지저분한 테스트코드나, 테스트코드를 구현하지 않는거나 동일한 결과를 낳는다. 
  - 실제 코드가 리팩터링 되면 그에 맞는 테스트코드도 리팩터링 되어야 한다
  - 만약 테스트코드가 지저분하면 테스트코드의 리팩터링에 드는 비용이 매우 많아져, 운영 코드 수정에 드는 비용보다 테스트코드 수정 비용이 많이 들어가게 된다. 


### 깨끗한 테스트코드 만들기 
- 테스트코드는 무조건 가독성이 매우 중요하다
- given / when / then 패턴을 최대한 지키자 
- 하나의 논리는 하나의 함수로 묶어 표현하고 최대한 재사용하자 
- 테스트코드는 실제코드처럼 효율적일 필요는 없다. 최대한 표현력이 풍부하게 만들자
- 각 테스트 당 개념은 하나만 하자. 그럼 자연적으로 assert도 하나만 필요할 것이다. 

### F.I.R.S.T
- 깨끗한 테스트는 다음 다섯가지 규칙을 따른다. 
1. Fast
   - 테스트는 빨리 돌아야 한다. 
2. Independent
   - 각 테스트는 서로 의존하면 안된다. 한 테스트가 다음 테스트의 실행 환경을 준비해서는 안된다. 
   - 어떤 순서로 테스트가 실행되던 괜찮아야한다. 
3. Repeatable
   - 테스트는 어떤 환경에서도 반복 가능해야 한다. (네트워크가 없는 환경일지라도)
4. Self-Validating
   - 테스트는 Boolean으로 결과를 내야한다. 해당 Boolean으로 테스트의 성공/실패 여부를 바로 판단해야한다 
5. Timely
   - 테스트는 적시에 작성해야한다. 단위테스트는 테스트 하려는 실제 코드를 구현하기 직전에 구현한다. 