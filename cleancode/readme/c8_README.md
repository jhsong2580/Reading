# 경계

- 외부 코드를 사용함에 있어, 우리 코드와 깔끔하게 통합해야하고 이 경계를 깔끔하게 처리할수 있어야 한다.

---
### 외부코드 사용하기 
- 인터페이스 제공자 : 적용성을 최대한 높여 많은 고객을 받길 원함
- 인터페이스 사용자 : 자신의 환경에 맞는, 자신의 요구에 집중하는 인터페이스를 바란다.
- 외부 코드에서 반환한 데이터를 내부 코드에서 사용하면 안된다. 만약 버전업으로 인해 해당 데이터가 변경된다면 변경 범위는 우리 전체 어플리케이션일 것이다. 
- 외부/내부 코드의 경계에서 내부에서 사용할 데이터 타입으로 변경해서 사용하는것이 좋다.

### 경계 살피고 익히기
- 외부 코드를 사용했을때, 외부 패키지 테스트가 우리 책임은 아니나, 우리 자신을 위해 테스트 해두는것이 좋다. 
- 외부 라이브러리를 사용했을때, 우리는 
  1. 사용법을 배우고
  2. 예상대로 동작하는지 확인하고
  3. 디버깅을 한다
- 이것을 동시에 하기에는 어려우니, 외부라이브러리를 위한 "학습테스트"를 만든다. 
  - 우리 프로그램에서 사용하려는 방식대로 외부API를 호출하여 테스트한다. (우리 예상과 맞는 답변을 내놓는지?)

### 학습테스트는 공짜 이상이다.
- 학습테스트에 드는 비용은 없고 외부 라이브러리에 대한 지식, 안정성만 확보하는 손쉬운 방법이다. 

### 아직 존재하지 않는 외부 라이브러리 사용하기
- 현업에서 발생하는 문제인데, 아직 정의되지 않은 외부 라이브러리와 내부 코드를 분리하는 작업이다. 
- 이때 외부와 내부 경계를 "인터페이스"로 구현한다. 
  - 이때 이 인터페이스는 우리가 전적으로 통제한다는 장점이 생기고, 내부 코드에서 코드 가독성 및 코드 의도도 분명해진다.
  - 그리고 테스트 또한 인터페이스를 구현한 Fake 구현체를 만들어 테스트도 용이하다. 

### 깨끗한 경계
- 외부 라이브러리를 사용할때, 해당 라이브러리가 변경이 일어남에 따라 우리 코드 변경 비용이 지나치게 커지지 않도록 주의해야한다. 